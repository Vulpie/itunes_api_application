{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/State.js","webpack:///./src/js/app.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,OAAO;AAC7B,sBAAsB,OAAO;AAC7B,sBAAsB,OAAO;AAC7B,sBAAsB,OAAO;AAC7B,sBAAsB,cAAc;AACpC,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7BA;AAAA;AAAA;AACA;AACA;AACA;AACA;;AAEA,UAAU,qBAAqB;AACJ;;AAE3B;AACA,QAAQ;AACR;AACA,qBAAqB,8CAAK;;AAE1B;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,SAAS;AACvB,WAAW,OAAO,qBAAqB;AACvC,WAAW,OAAO;AAClB,cAAc,OAAO;AACrB;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,aAAa;AAC3E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,gBAAgB;AACxD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oDAAoD,kBAAkB;;AAEtE,iGAAiG,mBAAmB;AACpH,0DAA0D,wBAAwB;AAClF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,kGAAkG,KAAK;AACvG,wGAAwG,KAAK;AAC7G;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,cAAc,SAAS;AACvB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,2CAA2C;AACnE;AACA;AACA,kEAAkE,4CAA4C;AAC9G,wCAAwC,+CAA+C;;AAEvF,sCAAsC,yCAAyC;AAC/E,sCAAsC,yCAAyC,GAAG,4CAA4C;;;AAG9H;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/app.js\");\n","export default class State {\r\n    /**\r\n     * Default settings\r\n     * @class\r\n     */\r\n    constructor() {\r\n        /**\r\n         * @property {number} currentPage - The page that is currently viewed\r\n         * @property {number} lastPage - Last available page for search results\r\n         * @property {number} item_id_glob - Global ID for every item for the latest search result\r\n         * @property {number} button_id_glob - Global ID for every button\r\n         * @property {Array<Object>} search_items_list - Array of objects received from iTunes\r\n         * @property {string} last_search - The latest search phrase\r\n         */\r\n        this.currentPage = 0\r\n        this.lastPage\r\n        this.item_id_glob = 0\r\n        this.button_id_glob = 0\r\n        this.search_items_list = []\r\n        this.last_search = ''\r\n    }\r\n\r\n    /**\r\n     * @property {Function} resetPageNumber - A function to reset current page count\r\n     * @return void\r\n     */\r\n    resetPageNumber() {\r\n        this.currentPage = 0\r\n    }\r\n}\r\n","/**\r\n * @file index.html is the root file for this app\r\n * @author Filip Wojta≈õ\r\n * @see <a href=\"http://vojtas.pl\">Portfolio</a>\r\n */\r\n\r\n//import { nextPage, prevPage } from './pages'\r\nimport State from './State'\r\n\r\n/**\r\n * See {@link State}\r\n */\r\nconst appState = new State()\r\n\r\n/**\r\n * Anchor element for search button\r\n * @type {Element}\r\n */\r\nconst getSongInfo = document.getElementById('searchButton')\r\n\r\ngetSongInfo.addEventListener('click', () => {\r\n    appState.search_items_list.length = 0\r\n    appState.resetPageNumber()\r\n    let searchString = document.getElementById('searchSongTextInput').value\r\n    appState.last_search = searchString\r\n    searchForResults(searchString)\r\n})\r\n\r\n/**\r\n * @property {Function} prevPage - A function loading previous page\r\n * @return void\r\n */\r\nfunction prevPage() {\r\n    console.log('prev')\r\n    if (appState.currentPage != 0) {\r\n        appState.currentPage = appState.currentPage - 1\r\n        searchForResults(appState.last_search, appState.currentPage)\r\n    } else {\r\n        console.error('This is the first page')\r\n        document.getElementById(\r\n            'searchResult'\r\n        ).innerHTML = `<p class=\"warn\">This is the first page</p>`\r\n    }\r\n}\r\n/**\r\n * @property {Function} nextPage - A function loading next page\r\n * @return void\r\n */\r\nconst nextPage = () => {\r\n    console.log('next')\r\n    if (appState.currentPage != appState.lastPage) {\r\n        appState.currentPage = appState.currentPage + 1\r\n        searchForResults(appState.last_search, appState.currentPage)\r\n    } else {\r\n        console.error('This is the last page')\r\n        document.getElementById(\r\n            'searchResult'\r\n        ).innerHTML = `<p class=\"warn\">This is the last page</p>`\r\n    }\r\n}\r\n\r\n/**\r\n * @property {Function} searchForResults - Sending and receiving data from iTunes\r\n * @param {string} searchString - See {@link last_search}\r\n * @param {number} page\r\n * @property {string} corsURL - URLproxy to avoid CORS problem on github pages. See link below (CORS REDME)\r\n * @see <a href=\"https://github.com/Rob--W/cors-anywhere/blob/master/README.md\">CORS README</a>\r\n * @property {string} iTunesURL - iTunes api url. Contains searchString, entity type (song) and limits (200)\r\n * @property {string} url - Full url\r\n * @async\r\n * @return void\r\n */\r\nasync function searchForResults(searchString, page = 0) {\r\n    console.log('test 2')\r\n    const corsURL = 'https://cors-anywhere.herokuapp.com/'\r\n    const iTunesURL = `https://itunes.apple.com/search?term=${searchString}&entity=song&limit=200`\r\n    const url = corsURL + iTunesURL\r\n\r\n    const data = await fetch(url)\r\n    await data.json().then((res) => {\r\n        if (res.resultCount === 0) {\r\n            document.getElementById(\r\n                'searchResult'\r\n            ).innerHTML = `<p class=\"info\">Sorry, no matches found</p>`\r\n            document.getElementById('output').innerHTML = ''\r\n            document.getElementById('button-box').innerHTML = ''\r\n            return\r\n        }\r\n\r\n        let pag = [0, 8]\r\n        let searchResult = `<h4>Found ${res.resultCount} songs</h4>`\r\n        appState.lastPage = Math.round(res.resultCount / 9)\r\n        let output = ``\r\n        let i = 0\r\n\r\n        res.results.forEach((ret) => {\r\n            const item = {\r\n                item_id: '',\r\n                img_url: '',\r\n                songName: '',\r\n                arrtistName: '',\r\n                rating: ''\r\n            }\r\n            item.item_id = appState.item_id_glob\r\n            item.img_url = ret.artworkUrl100\r\n            item.songName = ret.collectionName\r\n            item.arrtistName = ret.artistName\r\n\r\n            item.price = ret.collectionPrice\r\n            item.currency = ret.currency\r\n            item.genre = ret.primaryGenreName\r\n\r\n            appState.item_id_glob++\r\n            if (appState.item_id_glob === 200) {\r\n                appState.item_id_glob = 0\r\n            }\r\n\r\n            if (i >= pag[0] + page * 9 && i <= pag[1] + page * 9) {\r\n                output += `\r\n                                        \r\n                                <div class=\"main__wrapper-output-display-song\">   \r\n                                        <img src=\"${ret.artworkUrl100}\" alt=\"\" class=\"main__wrapper-output-display-song-img\">\r\n                                    \r\n                                            <p class=\"main__wrapper-output-display-song-name\"> ${ret.collectionName} <p>\r\n                                            <button id=\"${appState.button_id_glob}\" class=\"main__wrapper-output-display-song-btn\" onclick=\"getMoreInfo(this.id)\"> \r\n                                            <div class=\"main__wrapper-output-display-song-btn-hr\"></div>\r\n                                            <div class=\"main__wrapper-output-display-song-btn-hr\"></div>\r\n                                            <div class=\"main__wrapper-output-display-song-btn-hr\"></div>\r\n                                            </button>\r\n                                    \r\n                                </div>\r\n                                `\r\n            }\r\n            appState.button_id_glob++\r\n            if (appState.button_id_glob == 200) {\r\n                appState.button_id_glob = 0\r\n            }\r\n            appState.search_items_list.push(item)\r\n            i++\r\n        })\r\n        let buttons = `\r\n                    <button class=\"main__wrapper-button-box-pagination\" onclick=\"prevPage()\">\t&lt;\t&lt; prev</button>\r\n                    <button class=\"main__wrapper-button-box-pagination\" onclick=\"nextPage()\"> next \t&gt;\t&gt;</button>\r\n                    `\r\n\r\n        document.getElementById('button-box').innerHTML = buttons\r\n        document.getElementById('searchResult').innerHTML = searchResult\r\n        document.getElementById('output').innerHTML = output\r\n    })\r\n}\r\n\r\n/**\r\n * @property {Function} getMoreInfo - The button opens up an output window over the displayed results\r\n * @param {number} btn_id - ID of the clicked button.\r\n * @return void\r\n */\r\nconst getMoreInfo = (btn_id) => {\r\n    document.getElementById('info-display').style.display = 'block'\r\n    document.getElementById('info-display').innerHTML = `       \r\n    <div class=\"main__wrapper-display-box\">   \r\n        <div class=\"main__wrapper-display-box-imgBox\">\r\n            <img src=\"${appState.search_items_list[btn_id].img_url}\" alt=\"\" class=\"main__wrapper-display-box-imgBox-img\">\r\n        </div> \r\n        <div class=\"main__wrapper-display-box-desc\">\r\n                <p class=\"main__wrapper-display-box-desc-name\"> ${appState.search_items_list[btn_id].songName} <p>\r\n                <p class=\"artist\"> By ${appState.search_items_list[btn_id].arrtistName} <p>\r\n\r\n                <p class=\"artist\">  ${appState.search_items_list[btn_id].genre} <p>\r\n                <p class=\"artist\">  ${appState.search_items_list[btn_id].price} ${appState.search_items_list[btn_id].currency}<p>\r\n                \r\n                \r\n                <button class=\"main__wrapper-display-box-desc-btn\" onclick=\"closeInfoDisplay()\"> Close </button>\r\n                \r\n        </div>\r\n        <div class=\"clear\"></div>\r\n    </div>\r\n    `\r\n}\r\n\r\n/**\r\n * @property {Function} closeInfoDisplay - The function closing the display with additional informations about the song\r\n * @return void\r\n */\r\nconst closeInfoDisplay = () => {\r\n    document.getElementById('info-display').style.display = 'none'\r\n    document.getElementById('info-display').innerHTML = ''\r\n}\r\n"],"sourceRoot":""}